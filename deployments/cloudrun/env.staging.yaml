# Environment Configuration: Staging
# LLM-Sentinel unified service environment variables for staging
#
# These values are used by Cloud Run and should be set via:
# - gcloud run deploy --set-env-vars (for non-sensitive values)
# - gcloud run deploy --set-secrets (for sensitive values via Secret Manager)

# =============================================================================
# REQUIRED ENVIRONMENT VARIABLES
# =============================================================================

# Platform identification
PLATFORM_ENV: staging
SERVICE_NAME: llm-sentinel
SERVICE_VERSION: "${COMMIT_SHA:-staging}"

# Logging
RUST_LOG: info
RUST_BACKTRACE: "0"

# Configuration
SENTINEL_CONFIG: /etc/sentinel/sentinel.yaml

# =============================================================================
# SERVICE DEPENDENCIES (from Secret Manager)
# =============================================================================

# ruvector-service connection
# Secret: ruvector-service-url
RUVECTOR_SERVICE_URL: "https://ruvector-service-staging.run.app"

# ruvector-service authentication
# Secret: ruvector-api-key
RUVECTOR_API_KEY: "${SECRET:ruvector-api-key}"

# LLM-Observatory telemetry endpoint
# Secret: observatory-endpoint
TELEMETRY_ENDPOINT: "https://llm-observatory-staging.run.app/api/v1/ingest"

# =============================================================================
# AGENT CONFIGURATION
# =============================================================================

# Anomaly Detection Agent
SENTINEL_ANOMALY_ZSCORE_THRESHOLD: "3.0"
SENTINEL_ANOMALY_IQR_MULTIPLIER: "1.5"
SENTINEL_ANOMALY_MAD_THRESHOLD: "3.5"
SENTINEL_ANOMALY_CUSUM_THRESHOLD: "5.0"
SENTINEL_ANOMALY_BASELINE_WINDOW: "1000"
SENTINEL_ANOMALY_MIN_SAMPLES: "10"

# Drift Detection Agent
SENTINEL_DRIFT_PSI_MODERATE: "0.1"
SENTINEL_DRIFT_PSI_SIGNIFICANT: "0.25"
SENTINEL_DRIFT_MIN_SAMPLES: "30"
SENTINEL_DRIFT_HISTOGRAM_BINS: "10"

# Alerting Agent
SENTINEL_ALERTING_DEFAULT_SEVERITY: medium
SENTINEL_ALERTING_CONFIDENCE_THRESHOLD: "0.7"
SENTINEL_ALERTING_DEDUP_WINDOW_SECS: "300"
SENTINEL_ALERTING_MAX_ALERTS_PER_HOUR: "100"

# Incident Correlation Agent
SENTINEL_CORRELATION_TIME_WINDOW_SECS: "300"
SENTINEL_CORRELATION_MIN_SIGNALS: "2"
SENTINEL_CORRELATION_MAX_SIGNALS: "50"
SENTINEL_CORRELATION_THRESHOLD: "0.6"

# Root Cause Analysis Agent
SENTINEL_RCA_TEMPORAL_MIN_STRENGTH: "0.5"
SENTINEL_RCA_METRIC_CORRELATION_MIN: "0.6"
SENTINEL_RCA_HISTORY_THRESHOLD: "0.7"
SENTINEL_RCA_ANALYSIS_TIMEOUT_SECS: "30"
SENTINEL_RCA_MAX_HYPOTHESES: "5"

# =============================================================================
# DRY-RUN MODE
# =============================================================================
SENTINEL_DRY_RUN: "false"
